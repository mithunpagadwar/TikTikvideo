# TikTik Video Platform - Complete Deployment Guide

‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç Full Deployment Instructions

## üéØ Overview

TikTik ‡§è‡§ï complete video sharing platform ‡§π‡•à ‡§ú‡•ã YouTube/TikTok ‡§ú‡•à‡§∏‡§æ ‡§π‡•à, ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç:
- ‚úÖ Google Authentication (Firebase)
- ‚úÖ Video Upload to Cloudflare R2
- ‚úÖ Creator Wallets ‡§î‡§∞ Payments (Stripe/PayPal)
- ‚úÖ Tip System
- ‚úÖ Payout Management
- ‚úÖ Firebase Firestore Database

---

## üìã Prerequisites (‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§ö‡•Ä‡§ú‡•á‡§Ç)

‡§Ü‡§™‡§ï‡•ã ‡§Ø‡•á accounts ‡§ö‡§æ‡§π‡§ø‡§è:

1. **Firebase Account** (FREE)
   - https://firebase.google.com/
   
2. **Cloudflare Account** (FREE tier available)
   - https://www.cloudflare.com/
   
3. **Stripe Account** (for payments)
   - https://stripe.com/
   
4. **Vercel Account** (FREE)
   - https://vercel.com/

5. **GitHub Account** (FREE)
   - https://github.com/

---

## üöÄ Step-by-Step Deployment

### Step 1: Firebase Setup

#### 1.1 Create Firebase Project
1. [Firebase Console](https://console.firebase.google.com/) ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç
2. "Add project" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. Project name: `tiktik-videos` (‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§®‡§æ‡§Æ)
4. Google Analytics ‡§ö‡§æ‡§≤‡•Ç ‡§∞‡§ñ‡•á‡§Ç (optional)
5. ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç

#### 1.2 Enable Firebase Authentication
1. Firebase Console ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•ã ‡§ñ‡•ã‡§≤‡•á‡§Ç
2. ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´ "Build" ‚Üí "Authentication" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. "Get started" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
4. "Sign-in method" tab ‡§Æ‡•á‡§Ç
5. "Google" ‡§ï‡•ã enable ‡§ï‡§∞‡•á‡§Ç
6. Support email ‡§ö‡•Å‡§®‡•á‡§Ç
7. Save ‡§ï‡§∞‡•á‡§Ç

#### 1.3 Enable Cloud Firestore
1. "Build" ‚Üí "Firestore Database" ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç
2. "Create database" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. **Production mode** ‡§ö‡•Å‡§®‡•á‡§Ç
4. Location ‡§ö‡•Å‡§®‡•á‡§Ç (India: asia-south1 recommended)
5. Enable ‡§ï‡§∞‡•á‡§Ç

#### 1.4 Deploy Firestore Security Rules
1. Firebase Console ‡§Æ‡•á‡§Ç "Firestore Database" ‚Üí "Rules" ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç
2. `firestore.rules` file ‡§ï‡•Ä content copy ‡§ï‡§∞‡•á‡§Ç
3. Firebase Rules editor ‡§Æ‡•á‡§Ç paste ‡§ï‡§∞‡•á‡§Ç
4. "Publish" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç

#### 1.5 Get Firebase Config
1. Project Overview ‚Üí Project Settings
2. "Your apps" section ‡§Æ‡•á‡§Ç Web app add ‡§ï‡§∞‡•á‡§Ç
3. App nickname: `TikTik Web`
4. Firebase SDK configuration copy ‡§ï‡§∞‡•á‡§Ç:

```javascript
const firebaseConfig = {
  apiKey: "AIzaSy...",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  // ... etc
};
```

5. ‡§á‡§® values ‡§ï‡•ã ‡§Ö‡§™‡§®‡•Ä `script.js` ‡§Æ‡•á‡§Ç update ‡§ï‡§∞‡•á‡§Ç (lines 5-9)

#### 1.6 Get Firebase Admin SDK Credentials
1. Project Settings ‚Üí "Service accounts" tab
2. "Generate new private key" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. JSON file download ‡§π‡•ã‡§ó‡•Ä
4. ‡§á‡§∏ file ‡§ï‡•ã ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§ñ‡•á‡§Ç (Git ‡§Æ‡•á‡§Ç upload ‡§® ‡§ï‡§∞‡•á‡§Ç!)
5. `.env` file ‡§¨‡§®‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§Ø‡•á values ‡§°‡§æ‡§≤‡•á‡§Ç:

```env
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
```

---

### Step 2: Cloudflare R2 Setup

#### 2.1 Create R2 Bucket
1. [Cloudflare Dashboard](https://dash.cloudflare.com/) login ‡§ï‡§∞‡•á‡§Ç
2. ‡§¨‡§æ‡§à‡§Ç sidebar ‡§Æ‡•á‡§Ç "R2" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. "Create bucket" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
4. Bucket name: `tiktik-videos`
5. Location: Automatic (recommended)
6. Create ‡§ï‡§∞‡•á‡§Ç

#### 2.2 Enable Public Access (CORS)
1. ‡§Ö‡§™‡§®‡•Ä bucket ‡§ñ‡•ã‡§≤‡•á‡§Ç
2. "Settings" tab ‚Üí "CORS Policy" section
3. Add CORS policy:

```json
[
  {
    "AllowedOrigins": ["*"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": []
  }
]
```

4. Save ‡§ï‡§∞‡•á‡§Ç

#### 2.3 Get R2 Access Keys
1. R2 overview page ‡§™‡§∞ "Manage R2 API Tokens" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
2. "Create API token" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. Token name: `TikTik Upload`
4. Permissions: "Object Read & Write"
5. TTL: Forever (‡§Ø‡§æ custom)
6. Create ‡§ï‡§∞‡•á‡§Ç

7. Keys copy ‡§ï‡§∞‡•á‡§Ç (‡§Ø‡•á ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á!):
   - Access Key ID
   - Secret Access Key

8. `.env` file ‡§Æ‡•á‡§Ç add ‡§ï‡§∞‡•á‡§Ç:

```env
R2_ENDPOINT=https://[account-id].r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=your_access_key_id
R2_SECRET_ACCESS_KEY=your_secret_access_key
R2_BUCKET_NAME=tiktik-videos
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev
```

#### 2.4 Setup Public URL (Domain)
1. R2 bucket settings ‚Üí "Public access"
2. "Connect domain" ‡§Ø‡§æ "Enable R2.dev subdomain"
3. Public URL ‡§ï‡•ã `.env` ‡§Æ‡•á‡§Ç `R2_PUBLIC_URL` ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç save ‡§ï‡§∞‡•á‡§Ç

---

### Step 3: Stripe Payment Setup

#### 3.1 Create Stripe Account
1. [Stripe Dashboard](https://dashboard.stripe.com/register) ‡§™‡§∞ signup ‡§ï‡§∞‡•á‡§Ç
2. Business details fill ‡§ï‡§∞‡•á‡§Ç
3. Verify email

#### 3.2 Get API Keys
1. Stripe Dashboard ‚Üí "Developers" ‚Üí "API keys"
2. **Test mode** ‡§Æ‡•á‡§Ç start ‡§ï‡§∞‡•á‡§Ç
3. Secret key ‡§î‡§∞ Publishable key copy ‡§ï‡§∞‡•á‡§Ç

4. `.env` ‡§Æ‡•á‡§Ç add ‡§ï‡§∞‡•á‡§Ç:

```env
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxx
```

#### 3.3 Setup Webhook (Optional for production)
1. "Developers" ‚Üí "Webhooks"
2. "Add endpoint"
3. Endpoint URL: `https://your-app.vercel.app/api/stripe-webhook`
4. Events to listen: `payment_intent.succeeded`
5. Webhook secret copy ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ `.env` ‡§Æ‡•á‡§Ç add ‡§ï‡§∞‡•á‡§Ç

---

### Step 4: GitHub Repository Setup

#### 4.1 Create Repository
1. GitHub ‡§™‡§∞ login ‡§ï‡§∞‡•á‡§Ç
2. "New repository" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. Repository name: `tiktik-video-platform`
4. Public ‡§Ø‡§æ Private ‡§ö‡•Å‡§®‡•á‡§Ç
5. Repository ‡§¨‡§®‡§æ‡§è‡§Ç

#### 4.2 Push Code to GitHub
‡§Ö‡§™‡§®‡•á project folder ‡§Æ‡•á‡§Ç terminal ‡§ñ‡•ã‡§≤‡•á‡§Ç:

```bash
# Git initialize ‡§ï‡§∞‡•á‡§Ç
git init

# ‡§∏‡§≠‡•Ä files add ‡§ï‡§∞‡•á‡§Ç
git add .

# First commit
git commit -m "Initial commit - TikTik Video Platform"

# Remote repository add ‡§ï‡§∞‡•á‡§Ç
git remote add origin https://github.com/YOUR_USERNAME/tiktik-video-platform.git

# Push ‡§ï‡§∞‡•á‡§Ç
git branch -M main
git push -u origin main
```

---

### Step 5: Vercel Deployment

#### 5.1 Connect to Vercel
1. [Vercel Dashboard](https://vercel.com/) ‡§™‡§∞ login ‡§ï‡§∞‡•á‡§Ç
2. "New Project" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. GitHub repository import ‡§ï‡§∞‡•á‡§Ç: `tiktik-video-platform`
4. "Import" ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç

#### 5.2 Configure Environment Variables
1. "Environment Variables" section ‡§Æ‡•á‡§Ç:
2. `.env.example` file ‡§ï‡•Ä ‡§∏‡§≠‡•Ä variables add ‡§ï‡§∞‡•á‡§Ç:

**Required Variables:**
```
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=...
FIREBASE_PRIVATE_KEY=...
R2_ENDPOINT=...
R2_ACCESS_KEY_ID=...
R2_SECRET_ACCESS_KEY=...
R2_BUCKET_NAME=tiktik-videos
R2_PUBLIC_URL=...
STRIPE_SECRET_KEY=...
STRIPE_PUBLISHABLE_KEY=...
ALLOWED_ORIGIN=https://your-app.vercel.app
```

3. **Important:** Private key ‡§ï‡•ã exactly quotes ‡§ï‡•á ‡§∏‡§æ‡§• paste ‡§ï‡§∞‡•á‡§Ç:
```
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
```

#### 5.3 Deploy
1. ‡§∏‡§≠‡•Ä environment variables check ‡§ï‡§∞‡•á‡§Ç
2. "Deploy" button ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
3. Wait ‡§ï‡§∞‡•á‡§Ç deployment complete ‡§π‡•ã‡§®‡•á ‡§§‡§ï (2-3 minutes)
4. Deployment successful ‡§π‡•ã‡§®‡•á ‡§™‡§∞ URL ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ: `https://your-app.vercel.app`

#### 5.4 Update Firebase Authorized Domains
1. Firebase Console ‚Üí Authentication ‚Üí Settings
2. "Authorized domains" ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡§æ Vercel URL add ‡§ï‡§∞‡•á‡§Ç:
   - `your-app.vercel.app`

---

## ‚úÖ Testing the Deployment

### Test 1: Frontend Access
1. ‡§Ö‡§™‡§®‡•Ä Vercel URL ‡§ñ‡•ã‡§≤‡•á‡§Ç: `https://your-app.vercel.app`
2. Website load ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è
3. UI properly display ‡§π‡•ã‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è

### Test 2: Google Login
1. "Login with Google" button ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
2. Google account select ‡§ï‡§∞‡•á‡§Ç
3. Login successful ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è
4. Profile pic ‡§î‡§∞ name display ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è

### Test 3: Wallet Access
1. Login ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶
2. "Your Channel" page ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç
3. "Wallet" tab ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
4. Wallet balance `$0.00` show ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è

### Test 4: Video Upload (Optional - requires more setup)
1. R2 setup complete ‡§π‡•ã‡§®‡•á ‡§™‡§∞
2. "Upload Video" option try ‡§ï‡§∞‡•á‡§Ç
3. Small test video upload ‡§ï‡§∞‡•á‡§Ç
4. Success message ‡§Ü‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è

---

## üîí Security Best Practices

### 1. Never Commit Secrets
`.gitignore` file check ‡§ï‡§∞‡•á‡§Ç:
```
.env
.env.local
.env.production
```

### 2. Use Environment Variables
- ‡§∏‡§≠‡•Ä API keys `.env` ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡•á‡§Ç
- Frontend ‡§Æ‡•á‡§Ç ‡§ï‡§≠‡•Ä secret keys ‡§® ‡§°‡§æ‡§≤‡•á‡§Ç
- Vercel environment variables ‡§Æ‡•á‡§Ç ‡§π‡•Ä secrets ‡§∞‡§ñ‡•á‡§Ç

### 3. Firestore Rules Active ‡§∞‡§ñ‡•á‡§Ç
- Default rules ‡§∏‡•á ‡§ï‡§≠‡•Ä ‡§® ‡§ö‡§≤‡§æ‡§è‡§Ç
- Production ‡§Æ‡•á‡§Ç proper authentication check ‡§ï‡§∞‡•á‡§Ç
- Regular security audit ‡§ï‡§∞‡•á‡§Ç

### 4. CORS Configuration
- ‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§™‡§®‡•á domains ‡§ï‡•ã allow ‡§ï‡§∞‡•á‡§Ç
- `*` (all origins) production ‡§Æ‡•á‡§Ç avoid ‡§ï‡§∞‡•á‡§Ç
- Regular CORS policy review ‡§ï‡§∞‡•á‡§Ç

---

## üêõ Common Issues & Solutions

### Issue 1: Firebase Authentication Failed
**Error:** "Firebase not initialized"

**Solution:**
1. Firebase SDK scripts check ‡§ï‡§∞‡•á‡§Ç `index.html` ‡§Æ‡•á‡§Ç
2. Firebase config ‡§Æ‡•á‡§Ç apiKey verify ‡§ï‡§∞‡•á‡§Ç
3. Authorized domains ‡§Æ‡•á‡§Ç Vercel URL add ‡§ï‡§∞‡•á‡§Ç

### Issue 2: R2 Upload Failed
**Error:** "Failed to generate upload URL"

**Solution:**
1. R2 credentials verify ‡§ï‡§∞‡•á‡§Ç (Access Key ID, Secret Key)
2. Bucket name correct ‡§π‡•à check ‡§ï‡§∞‡•á‡§Ç
3. CORS policy configured ‡§π‡•à verify ‡§ï‡§∞‡•á‡§Ç

### Issue 3: Stripe Payment Failed
**Error:** "Invalid API key"

**Solution:**
1. Test mode ‡§Æ‡•á‡§Ç `sk_test_` key use ‡§ï‡§∞‡•á‡§Ç
2. Vercel environment variables ‡§Æ‡•á‡§Ç key verify ‡§ï‡§∞‡•á‡§Ç
3. Stripe Dashboard ‡§Æ‡•á‡§Ç key active ‡§π‡•à check ‡§ï‡§∞‡•á‡§Ç

### Issue 4: Vercel Build Failed
**Error:** "Build failed"

**Solution:**
1. `package.json` present ‡§π‡•à check ‡§ï‡§∞‡•á‡§Ç
2. Node version 18+ use ‡§ï‡§∞‡•á‡§Ç
3. Build logs ‡§Æ‡•á‡§Ç error details check ‡§ï‡§∞‡•á‡§Ç

---

## üì± Features Guide

### For Users:
1. **Google Login**: Secure authentication via Firebase
2. **Video Browsing**: Watch videos without login
3. **Tip Creators**: Send tips to favorite creators (Stripe)
4. **Transaction History**: View all your tip transactions

### For Creators:
1. **Upload Videos**: Upload to secure Cloudflare R2 storage
2. **Creator Wallet**: Track earnings and balance
3. **Request Payouts**: Withdraw earnings via Stripe/PayPal
4. **Transaction History**: Monitor all incoming tips

---

## üîÑ Updating the App

### Update Code
```bash
# Make changes
git add .
git commit -m "Update: description"
git push origin main
```

Vercel automatically redeploys on git push!

### Update Environment Variables
1. Vercel Dashboard ‚Üí Project ‚Üí Settings
2. Environment Variables tab
3. Edit/Add variables
4. Redeploy trigger ‡§ï‡§∞‡•á‡§Ç

---

## üí∞ Cost Breakdown

### Free Tier Services:
- **Firebase**: 50k reads, 20k writes/day FREE
- **Cloudflare R2**: 10GB storage, 100k requests/month FREE
- **Vercel**: Unlimited deployments FREE (hobby)

### Paid Services:
- **Stripe**: 2.9% + ‚Çπ2 per transaction
- **Firebase** (if exceeded): Pay-as-you-go
- **R2** (if exceeded): $0.015/GB storage

**Expected Cost for 1000 users:**
- ~‚Çπ500-1000/month (primarily Stripe fees)

---

## üìû Support & Help

### Documentation:
- Firebase: https://firebase.google.com/docs
- Cloudflare R2: https://developers.cloudflare.com/r2/
- Stripe: https://stripe.com/docs
- Vercel: https://vercel.com/docs

### Common Commands:
```bash
# Local development
python3 -m http.server 5000

# View logs
vercel logs your-app

# Redeploy
vercel --prod
```

---

## ‚ú® Next Steps

1. **Custom Domain**: Add custom domain in Vercel settings
2. **Analytics**: Add Google Analytics
3. **SEO**: Optimize meta tags
4. **PWA**: Test progressive web app features
5. **Monitoring**: Set up error monitoring (Sentry)

---

**Congratulations! üéâ** ‡§Ü‡§™‡§ï‡§æ TikTik video platform successfully deploy ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à!

Questions ‡§Ø‡§æ issues ‡§ï‡•á ‡§≤‡§ø‡§è GitHub repository ‡§Æ‡•á‡§Ç issues create ‡§ï‡§∞‡•á‡§Ç‡•§

**Happy Building! üöÄ**
